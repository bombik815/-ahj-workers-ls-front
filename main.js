(()=>{"use strict";class e{constructor(e){this.server=e,this.buttonUpdate=document.querySelector(".header-update"),this.newsList=document.querySelector(".list-news"),this.waitNewsBox=document.querySelector(".wait-news"),this.noResponse=document.querySelector(".no-response"),this.news=null}events(){this.renderWaitNews(),this.responseNews(),this.clickBtnUpdate()}async responseNews(){const e=await this.server.loadNews();e?(this.noResponse.classList.add("none"),this.newsList.textContent=null,this.renderNews(e)):this.noResponse.classList.remove("none")}clickBtnUpdate(){this.buttonUpdate.addEventListener("click",(()=>{this.newsList.textContent=null,this.renderWaitNews(),this.responseNews()}))}renderWaitNews(){for(let e=0;e<3;e+=1){const e=this.waitNewsBox.cloneNode(!0);e.classList.remove("none"),this.newsList.append(e)}}renderNews(t){this.waitNewsBox.classList.add("none");for(let s=0;s<t.length;s+=1)this.newsList.append(e.createNews(t[s]))}static createNews(t){const s=document.createElement("div"),n=document.createElement("div"),r=document.createElement("div"),o=document.createElement("img"),a=document.createElement("p");return n.textContent=e.getDate(t.date),o.src=t.img,a.textContent=t.text,r.className="news-body",o.className="news-img",r.append(o),r.append(a),s.append(n),s.append(r),s}static getDate(e){const t=new Date(e).getFullYear();let s=new Date(e).getMonth()+1,n=new Date(e).getDate(),r=new Date(e).getHours(),o=new Date(e).getMinutes();return 1===String(s).length&&(s=`0${s}`),1===String(n).length&&(n=`0${n}`),1===String(o).length&&(o=`0${o}`),1===String(r).length&&(r=`0${r}`),`${r}:${o} ${n}.${s}.${String(t).slice(2)}`}}console.log("app started");const t=new class{constructor(){this.url="https://ahj-sw-news.herokuapp.com/news"}async loadNews(){try{return(await fetch(this.url)).json()}catch(e){return console.log(e),!1}}};new e(t).events(),(async()=>{try{navigator.serviceWorker&&(await navigator.serviceWorker.register("./service-worker.js"),console.log("sw registered"))}catch(e){console.log(e)}})()})();